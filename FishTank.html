<html>
	<head>
		<title>FishTank 2.0</title>
		<script src="http://cloud.github.com/downloads/processing-js/processing-js/processing-1.4.1.min.js"></script>
		<script type="text/processing" data-processing-target="mycanvas">
       
        Eel randomEel = new Eel();
        ArrayList<Eel> EelList = new ArrayList<Eel>(); 

        Urchin randomUrchin = new Urchin();
        ArrayList<Urchin> urchinList = new ArrayList<Urchin>(); 

        Fish randomFish = new Fish();
        ArrayList<Fish> FishList = new ArrayList<Fish>(); 

        int WINDOW_WIDTH = 650;
        int WINDOW_HEIGHT = 650;
        PImage o;
        int Background_y_shift = 250;
        var drawBackground = function(By){
        fill(90, 90, 90);
            rect(0, 370+By, 1000, 30);
            fill(50, 50, 50);
            rect(0, 300+By, 200, 200);
            triangle(200, 300+By, 200, 400+By, 400, 400+By);
            beginShape();
            noStroke();
            fill(67, 247, 124);
            curveVertex(184,  291+By);
            curveVertex(100,  309+By);
            curveVertex(168,  119+By)
            curveVertex(140,  17+By);
            curveVertex(140,  147+By);
            curveVertex(132, 313+By);
            curveVertex(132, 106+By);
            endShape();

            beginShape();
            noStroke();
            fill(67, 247, 124);
            curveVertex(184,  291+By);
            curveVertex(3,  309+By);
            curveVertex(16,  119+By);
            curveVertex(14,  17+By);
            curveVertex(94,  147+By);
            curveVertex(90, 313+By);
            curveVertex(132, 106+By);
            endShape();
        }

    o = loadImage("Ocean.jpg");

    image(o, 0, 0);
        
        int REFRESH_RATE_PER_SECOND = 30;
        //runs once at the start of the program 
        void setup() 
        {
          size(WINDOW_WIDTH, WINDOW_HEIGHT);
        
          frameRate(REFRESH_RATE_PER_SECOND);//how often per second the draw function is called 
          
          var numberOfEel = random(3,5); 
          for(var i = 0; i< numberOfEel; i++) {
          	EelList.add(new Eel(i*150+75,i*150));
          }
          var numberOfUrchin = random(3,10); 
          for(var b = 0; b< numberOfUrchin; b++) {
            urchinList.add(new Urchin(b*150,b*300));
          }
          var numberOfFish = random(2,5); 
          for(var z = 0; z < numberOfFish; z++) {
            FishList.add(new Fish(z*100+70,-z*300+100));
          }


         o = loadImage("Ocean.jpg");
     
        }
        
        
        //called repeatedly 
        void draw() { 
    
          image(o, 0, 0);

          drawBackground(Background_y_shift);
          
          for(var i = 0; i < EelList.size(); i++) {
          	Eel currentEel = EelList.get(i);
          	currentEel.drawEel();
          }
        for(var b = 0; b < urchinList.size(); b++) {
            Urchin currentUrchin = urchinList.get(b);
            currentUrchin.drawUrchin();
          }
          for(var z = 0; z < FishList.size(); z++) {
            Fish currentFish = FishList.get(z);
            currentFish.drawFish();
          }
        } 
        class Urchin 
        {
            //attributes 
          var x, y, size, color1, color2, color3;
            
            //constructor 
            Urchin(var UrchinY, UrchinX)
            {
                //attributes on the left, parameters on the right
                x = UrchinX;
            y = UrchinY;
            size = random(50,80);
            color1 = random(0,255);
            color2 = random(0,255);
            color3 = random(0,255); 
                
            }
            
            void drawUrchin()
            {
            strokeWeight(1);
            line(x,y,x+size/2,y+size/2);
            line(x,y,x-size/2,y+size/2);
            line(x,y,x+size/2,y-size/2);
            line(x,y,x-size/2,y-size/2);
            line(x,y,x,y+size/1.3);
            line(x,y,x,y-size/1.3);
            line(x,y,x+size/1.4,y);
            line(x,y,x-size/1.4,y);

            noStroke();
            fill(color1, color2, color3);
            ellipse(x,y,size,size);

            fill(0, 0, 0);
            ellipse(x-size/5,y,size/10,size/10); 
            ellipse(x+size/5,y,size/10,size/10);
            noFill();
            stroke(0, 0, 0);
            strokeWeight(3);
            ellipse(x,y+size/6,size/9,size/9);
            x++;
            if (x > 750){
                x = -100;
              }
            
            }
        }
        class Eel 
        {
        	//attributes 
          var eelx, eely, color1, color2, color3;
        	
        	//constructor 
        	Eel(var why,ex)
        	{
        		//attributes on the left, parameters on the right
        		eelx = ex;
            eely = why;
            size = random(50,100);
            color1 = random(0,255);
            color2 = random(0,255);
            color3 = random(0,255); 
        		
        	}
        	
        	void drawEel()
        	{
            stroke(0,0,0);
            strokeWeight(1);
            beginShape();
            fill(color1, color2, color3);
            curveVertex(418+eelx, 375+eely);
            curveVertex(157+eelx, 207+eely);
            curveVertex(69+eelx, 145+eely);
            curveVertex(eelx-4,  146+eely);
            curveVertex(153+eelx, 207+eely);
            curveVertex(eelx-7, 18+eely);
            endShape();
            fill(0,0,0);
            eelx++;
            if (eelx > 700){
            eelx = -100;
              }
        	
        	}

        }

        class Fish{

          var bodyLength, bodyHeight, color, bCenterY, centerX, centerY, bCenterX;
        
         Fish(var Yy, Xx){
            centerY = Yy;
            centerX = Xx;
            color = random(0, 255);
            color1 = random(0, 255);
            color2 = random(0, 255);
            bCenterY = centerY;
            bodyLength = 80;
            bCenterX = centerX;
            bodyHeight = 30;
     
            }
            void drawFish() {
              noStroke();
              fill(color, color1, color2);
              // body
              ellipse(centerX, centerY, bodyLength, bodyHeight);
              // tail
              var tailWidth = bodyLength/4;
              var tailHeight = bodyHeight/2;
              triangle(centerX-bodyLength/2, centerY,
              centerX-bodyLength/2-tailWidth, centerY-tailHeight,
              centerX-bodyLength/2-tailWidth, centerY+tailHeight);
              // eye
                fill(33, 33, 33);
                ellipse(centerX+bodyLength/4, centerY, bodyHeight/5, bodyHeight/5);
                fill(255, 255, 255);
                ellipse(bCenterX + 40, bCenterY - 20, 10, 10);
                ellipse(bCenterX + 40, bCenterY - 40, 10, 10);
                ellipse(bCenterX + 40, bCenterY - 60, 10, 10);
                centerX ++;
                bCenterX != centerX;
                bCenterY-= 2;
                
                if (centerX > 700){
                    centerX = 0;
                     bCenterX = centerX;
                bCenterY = centerY;
                fill(255, 255, 255);
                ellipse(bCenterX + 40, bCenterY - 20, 10, 10);
                ellipse(bCenterX + 40, bCenterY - 40, 10, 10);
                ellipse(bCenterX + 40, bCenterY - 60, 10, 10);
                    
              }
              }
            }

        </script> 
    </head>
    
    <body>
		<canvas id="mycanvas"></canvas>
	</body>
</html>